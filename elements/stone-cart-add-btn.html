<script src="btn-behavior.js"></script>
<script src="../helpers.js"></script>

<!--
An element for adding an item to the cart. This element behaves like a wrapper for other elements providing the view. Hence, it can be used with any element you want. The list of cart items has to be shared with the button, otherwise, the item won't be added to the cart.

Example:

    <stone-cart-add-btn items="{{cartItems}}" item='{"id":1, "name":"Book", "price":10.5}'>
      <button>Add to cart</button>
    </stone-cart-add-btn>

    <stone-cart-add-btn items="{{cartItems}}" item='{"id":1, "name":"Book", "price":10.5}'>
      <a href="#">Add to cart</a>
    </stone-cart-add-btn>
-->
<dom-module id="stone-cart-add-btn">
  <template>
    <content></content>
  </template>

  <script>
    Polymer({
      is: 'stone-cart-add-btn',

      behaviors: [StoneCartBtnBehavior],

      properties: {
        /**
         * The item associated with the button.
         * The given item will be passed to the cart.
         * The item has to have at least the id and price properties.
         *
         * Example:
         *
         *     <stone-cart-add-button
         *       item='{"id": 1, "price": 10, "name": "Apple"}'>
         *     </stone-cart-add-button>
         */
        item: {
          type: Object
        }
      },

      listeners: {
        /**
         * Calls the addItem method if the tap event is
         * fired on the button.
         */
        tap: 'addItem'
      },

      /**
       * Adds the associated item to the cart.
       */
      addItem: function() {
        this.push('cartItems', this.item);
      }
    });
  </script>
</dom-module>
