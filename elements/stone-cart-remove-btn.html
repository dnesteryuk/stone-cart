<script src="btn-behavior.js"></script>
<script src="../helpers.js"></script>

<!--
An element for removing the already added item from the cart. This element behaves like a wrapper for other elements providing the view. Hence, it can be used with any element you want. The list of cart items has to be shared with the button, otherwise, the item won't be added to the cart.

Example:

    <stone-cart-remove-btn cart-items="{{cartItems}}" item='{"id":1}'>
      <button>Remove from cart</button>
    </stone-cart-remove-btn>

    <stone-cart-remove-btn cart-items="{{cartItems}}" item='{"id":1}'>
      <a href="#">Remove from cart</a>
    </stone-cart-remove-btn>
-->
<dom-module id="stone-cart-remove-btn">
  <template>
    <content></content>
  </template>

  <script>
    Polymer({
      is: 'stone-cart-remove-btn',

      behaviors: [StoneCartBtnBehavior],

      properties: {
        /**
         * The item associated with the button.
         * The given item will be used to find the corresponding item
         * in the cart to remove it. The item can
         * have only the id property.
         *
         * Example:
         *
         *     <stone-cart-remove-btn item='{"id": 1}'>
         *     </stone-cart-remove-btn>
         */
        item: {
          type: Object
        }
      },

      listeners: {
        /**
         * Calls the removeItem method if the tap event is
         * fired on the button.
         */
        tap: 'removeItem'
      },

      /**
       * Removes the associated item from the cart.
       */
      removeItem: function() {
        var index = StoneCartHelpers.indexOfItem(this.cartItems, this.item);
        this.splice('cartItems', index, 1);
      }
    });
  </script>
</dom-module>
